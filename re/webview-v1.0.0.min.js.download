!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(){return(e=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function t(e,t,n,o){return new(n||(n=Promise))((function(a,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((o=o.apply(e,t||[])).next())}))}function n(e,t){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,i=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return r}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}var i="undefined"!=typeof console,r=new Proxy({},{apply:function(){}});function s(e,t){return("0".repeat(t)+e).slice(-t)}var c=function(){function e(){}return e.prototype._prefix=function(){var e=new Date;return"["+s(String(e.getHours()),2)+":"+s(String(e.getMinutes()),2)+":"+s(String(e.getSeconds()),2)+":"+s(String(e.getMilliseconds()),3)+"] "},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,a([this._prefix()],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,a([this._prefix()],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,a([this._prefix()],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,a([this._prefix()],e))},e}(),u=i?new c:r;var p,l=function(){},d=function(e){return"function"==typeof e},v=function(e){return null!==e&&"object"==typeof e};"undefined"!=typeof WorkerGlobalScope&&(self,WorkerGlobalScope);var f,g=function(){return p||(p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})};"undefined"==typeof __NEZHA_BRIDGE__?(u.warn('"__NEZHA_BRIDGE__" not Found'),f={postAction:l,postMessage:l,postWebViewMessage:l}):f=__NEZHA_BRIDGE__;var h="$callback";function m(){var o,i=this,r=0,s=(o=Object.create(null),{on:function(e,t){(o[e]||(o[e]=[])).push(t)},once:function(e,t){var n=this,o=function(){n.off(e,o),t()};this.on(e,o)},off:function(e,t){if(o[e])if(t){var n=o[e].indexOf(t);n>=0&&o[e].splice(n,1)}else o[e].length=0},emit:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o[e]||[]).slice().forEach((function(e){e.apply(void 0,a(t))}))}}),c=null,p=new Map,l=new Map;return{registerEvent:function(e,t){return s.on(e,t),function(){s.off(e,t)}},registerCmd:function(e,t){p.has(e)?u.warn(e+" has been registed"):p.set(e,t)},getFallbackCmdHandler:function(){return c},setFallbackCmdHandler:function(e){c=e},createEventMessage:function(e,t){return void 0===t&&(t={}),{type:e,payload:t}},createActionMessage:function(e,t,n){var o,a={action:e,payload:{}};if(v(t)?(a.payload=t,o=n):d(t)?o=t:d(n)&&(o=n),o){var i=r++;l.set(i,o),a.callbackId=i}return a},handleMessage:function(o,a,r){return t(i,void 0,void 0,(function(){var t,i,u,f,g,m,y,b,w,I,S,U;return n(this,(function(n){switch(n.label){case 0:if(o.type)return s.emit((t=o).type,t.payload),[2];if(u=(i=o).action,m=i.callbackId,y=i.error,!v(g=void 0===(f=i.payload)?{}:f))throw Error("request payload should be an object");if(u===h)return(b=l.get(m))&&b(y||null,g),[2];S=p.get(u);try{I=S?S.call(null,g,r):function(e,t,n){if(!c)throw new Error("Unkown Action");return c(e,t,n)}(u,g,r)}catch(e){w=e.message||String(e)}if(null==m)return[3,5];if(!(v(C=I)&&d(C.then)&&d(C.catch)))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,I];case 2:return I=n.sent(),[3,4];case 3:return U=n.sent(),w=U.message||String(U),[3,4];case 4:if(void 0!==I){if(!v(I))throw Error("response payload should be an object")}else I={};a(e(e({action:h,payload:I,callbackId:m},w&&{error:w}),{_callbckAction:u})),n.label=5;case 5:return[2]}var C}))}))}}}function y(e){var t=[],n=!1,o=function(t){e.postMessage(t)},a=function(e){n?(o(e),a=o):t.push(e)};return{ready:function(){n=!0,function(){var e=t.slice();t.length=0;for(var n=0;n<e.length;n++)o(e[n])}()},postMessage:a,get onmessage(){return e.onmessage},set onmessage(t){e.onmessage=t}}}var b={onmessage:l,postMessage:function(e){f.postMessage(e.message)}},w={onMessage:function(e){u.info("on message",e),b.onmessage({message:e})}};g().__NEZHA_WEB_BRIDGE__=w;var I,S,U=function(e,o,a){var i=this,r=void 0===a?{}:a,s=r.waitForReady,c=r.getDefaultTargetId;void 0!==s&&s&&(o=y(o));var p=m(),l=function(t){u.debug("[app-rpc]("+e+") send:",t),o.postMessage(t)};return o.onmessage=function(o){return t(i,void 0,void 0,(function(){var t,a;return n(this,(function(n){return u.debug("[app-rpc]("+e+") receive:",o),t=o.srcId,a=JSON.parse(o.message),p.handleMessage(a,(function(e){var n=JSON.stringify(e);l(void 0===t?{message:n}:{message:n,targetIds:[t]})}),{rendererId:t}),[2]}))}))},{ready:function(){o.ready&&o.ready()},send:function(e,t){var n=JSON.stringify(p.createEventMessage(e,t)),o=c&&c();l(o?{message:n,targetIds:[o]}:{message:n})},on:function(e,t){return p.registerEvent(e,t)},invoke:function(e,t){return void 0===t&&(t={}),new Promise((function(n,o){var a=JSON.stringify(p.createActionMessage(e,t,(function(e,t){e?o(e):n(t)}))),i=c&&c();l(i?{message:a,targetIds:[i]}:{message:a})}))},invokeSync:function(e,t){var n,o;void 0===t&&(t={});var a=JSON.stringify(p.createActionMessage(e,t,(function(e,t){e?n=e:o=t}))),i=c&&c();if(l(i?{message:a,targetIds:[i]}:{message:a}),n)throw n;return o},invokeOn:function(e,t,n){return void 0===n&&(n={}),new Promise((function(o,a){var i=JSON.stringify(p.createActionMessage(t,n,(function(e,t){e?a(e):o(t)})));l({message:i,targetIds:e})}))},invokeSyncOn:function(e,t,n){var o,a;void 0===n&&(n={});var i=!1,r=JSON.stringify(p.createActionMessage(t,n,(function(e,t){i=!0,e?o=e:a=t})));if(l({message:r,targetIds:e}),null!==o)throw o;if(!i)throw"RPC: No Response";return a},handle:function(e,t){p.registerCmd(e,t)},handleUnknown:function(e){p.setFallbackCmdHandler(e)}}}("webview",b);!function(e){e.$Ready="$ready",e.$RendererReady="$renderer-ready",e.UIComponentInit="ui_comp_init",e.UIComponentBindProps="ui_comp_bind_props",e.UIComponentBindListeners="ui_comp_bind_listeners",e.UIComponentSetData="ui_comp_set_data",e.UIComponentInvokeLifecycleHook="ui_comp_invoke_lefecycle",e.UIComponentInvokeMethod="ui_comp_invoke_method",e.UIComponentInvokeEvent="ui_comp_invoke_event",e.UINavigationPush="ui-navigation-push",e.UINavigationToMP="ui-navigation-to-mp",e.UINavigationToDeeplink="ui-navigation-to-deeplink",e.UIDownloadImage="ui-download-image",e.UINativeComponentCreate="ui-native-component-create",e.UINativeComponentDestroy="ui-native-component-destroy",e.UINativeComponentUpdate="ui-native-component-update",e.UINativeComponentEvent="ui-native-component-event",e.UINativeComponentInvoke="ui-native-component-invoke",e.UINativeUIShow="ui-native-ui-show",e.UINativeUIHide="ui-native-ui-hide",e.UINativeUIUpdate="ui-native-ui-update",e.UINativeUIEvent="ui-native-ui-event",e.UISelectQueryEvent="ui-select-query-event",e.UIEmitVideoContextEvent="ui-emit-video-context-event",e.UICanvasSetSize="ui-canvas-set-size",e.UICanvasContextInit="ui-canvas-context-init",e.UICanvasContextSetter="ui-canvas-context-setter",e.UICanvasContextEvent="ui-canvas-context-event",e.UICanvasImageCreate="ui-canvas-image-create",e.UICanvasImageSetter="ui-canvas-image-setter",e.UICanvasImageOnload="ui-canvas-image-onload",e.UICanvasGradientCreate="ui-canvas-gradient-create",e.UICanvasGradientAddColorStop="ui-canvas-gradient-add-color-stop",e.UICanvasPatternCreate="ui-canvas-pattern-create",e.UICanvasPath2DCreate="ui-canvas-path2d-create",e.UICanvasPath2DEvent="ui-canvas-path2d-event",e.UIWebViewShow="ui-web-view-show",e.UIWebViewUpdate="ui-web-view-update",e.UIWebViewHide="ui-web-view-hide",e.UIWebViewEvent="ui-web-view-event",e.UIPerformanceLog="ui-performance-log",e.UIPrivatePerformanceTest="ui-private-performance-test",e.UIThemeChange="ui-theme-change",e.WebViewPostMessage="web-view-post-message",e.ShowToast="show-toast",e.HideToast="hide-toast",e.ShowLoading="show-loading",e.HideLoading="hide-loading",e.ShowModal="show-modal",e.SetNavigationBarTitle="set-navigation-bar-title",e.SetNavigationBarColor="set-navigation-bar-color",e.StartPullDownRefresh="start-pull-down-refresh",e.StopPullDownRefresh="stop-pull-down-refresh",e.SetTabBarItem="set-tab-bar-item",e.ShowTabBar="show-tab-bar",e.HideTabBar="hide-tab-bar",e.GetStorageInfo="get-storage-info",e.GetStorageInfoSync="get-storage-info-sync",e.GetStorage="get-storage",e.SetStorage="set-storage",e.RemoveStorage="remove-storage",e.ClearStorage="clear-storage",e.GetStorageSync="get-storage-sync",e.SetStorageSync="set-storage-sync",e.RemoveStorageSync="remove-storage-sync",e.ClearStorageSync="clear-storage-sync",e.GetSystemInfo="get-system-info",e.GetSystemInfoSync="get-system-info-sync",e.SetClipboardData="set-clipboard-data",e.GetClipboardData="get-clipboard-data",e.TwoFa="two-fa",e.ScanCode="scan-code",e.AppApplyUpdate="app-apply-update",e.HideHomeButton="hide-home-button",e.StartLocationUpdate="start-location-update",e.StopLocationUpdate="stop-location-update",e.OpenLocation="open-location",e.GetLocation="get-location",e.ChooseLocation="choose-location",e.GetUserInfo="get-userInfo",e.Login="login",e.NavigationPush="navigation-push",e.NavigationPop="navigation-pop",e.NavigationRedirect="navigation-redirect",e.NavigationSwitchTab="navigation-switchtab",e.NavigationToDeeplink="navigation-to-deeplink",e.NavigationBackMP="navigation-back-mp",e.Request="request",e.DownloadFile="download-file",e.NativeComponentCreate="native-component-create",e.NativeComponentDestroy="native-component-destroy",e.NativeComponentUpdate="native-component-update",e.NativeComponentInvoke="native-component-invoke",e.NativeUIShow="native-ui-show",e.NativeUIHide="native-ui-hide",e.NativeUIUpdate="native-ui-update",e.WebViewShow="show-webview",e.WebViewUpdate="update-webview",e.WebViewHide="hide-webview",e.WebSocketCreate="websocket-create",e.WebSocketSend="websocket-send",e.WebSocketClose="websocket-close",e.RequestPayment="request-payment",e.MonitorUpload="monitor-upload",e.ReportMonitor="report-monitor",e.ReportEvent="report-event",e.ReportAnalytics="report-analytics",e.ReportPerformance="report-performance",e.PrivateReportEvent="private-report-event",e.GetPreFetchData="get-pre-fetch-data",e.GetPeriodicFetchData="get-periodic-fetch-data",e.SetBackgroundFetchToken="set-background-fetch-token",e.KeyboardHide="keyboard-hide",e.KeyboardGetSelectedTextRange="keyboard-get-selected-text-range",e.Authorize="authorize",e.GetSetting="get-setting",e.OpenSetting="open-setting"}(I||(I={})),function(e){e.AppEnterForeground="app-enter-foreground",e.AppEnterBackground="app-enter-background",e.AppLaunch="app-launch",e.RouteChange="route-change",e.AppError="app-error",e.ThemeChange="theme-change",e.PullDownRefreshStarted="pull-down-refresh-started",e.LcocationChange="location-change",e.NativeComponentEvent="native-component-event",e.NativeUIEvent="native-ui-event",e.WebViewEvent="event-webview",e.WebSocketEvent="websocket-event",e.KeyboardHeightChange="keyboard-height-change",e.AppCheckForUpdate="app-check-for-update",e.AppUpdateFailed="app-update-failed",e.AppUpdateReady="app-update-ready"}(S||(S={}));var C=Object.freeze({__proto__:null,postMessage:function(e){U.invoke(I.WebViewPostMessage,{data:e})}});g().bn={miniProgram:C},U.handle(I.WebViewPostMessage,(function(e){var t=g().bn;"function"==typeof t.onMessage?t.onMessage(e):console.warn("[webview] receive message with out handler",e)})),U.invoke(I.$Ready,{})}();
